A = [1, 2, 1, 1, 2; 1, 1, 2, 1, 1; 1, 0, 1, 1, 0; 0, 1, 2, 1, 1; 1, 1, 0, 1, 1];
F1 = [0, 1, 1; 1, 0, 1; 1, 1, 0];
F2 = [0, 1, -1; 0, 1, -1; -1, 1, 0];
B = zeros(3, 3, 2);

for i = 1 : 3
	for j = 1 : 3
		B(i, j, 1) = sum(sum(A(i:i+2, j:j+2) .* F1));
		B(i, j, 2) = sum(sum(A(i:i+2, j:j+2) .* F2));
	end
end
